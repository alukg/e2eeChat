<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css'>
    <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css'>
    <link rel="stylesheet" href="chatStyle.css">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <title>Encrypted End-To-End Chat</title>
</head>
<body>

<div id="frame">
    <div id="sidepanel">
        <div id="search">
            <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
            <input type="text" placeholder="Search contacts..." />
        </div>
        <div id="contacts">
            <ul>
                <li class="contact">
                    <div class="wrap">
                        <div class="contact-status online"></div>
                        <p class="name">Louis Litt</p>
                    </div>
                </li>
                <li class="contact">
                    <div class="wrap">
                        <div class="contact-status waiting"></div>
                        <p class="name">Harvey Specter</p>
                    </div>
                </li>
                <li class="contact">
                    <div class="wrap">
                        <div class="contact-status"></div>
                        <p class="name">Rachel Zane</p>
                    </div>
                </li>
            </ul>
        </div>
        <form action="/logout">
            <input id="logout" type="submit" value="Logout" />
        </form>
    </div>
    <div class="content">
        <div class="contact-profile">
            <p>Harvey Specter</p>
        </div>
        <div class="messages">
            <ul>
                <li class="sent">
                    <p>How the hell am I supposed to get a jury to believe you when I am not even sure that I do?!</p>
                </li>
                <li class="replies">
                    <p>When you're backed against the wall, break the god damn thing down.</p>
                </li>
                <li class="replies">
                    <p>Excuses don't win championships.</p>
                </li>
                <li class="sent">
                    <p>Oh yeah, did Michael Jordan tell you that?</p>
                </li>
                <li class="replies">
                    <p>No, I told him that.</p>
                </li>
                <li class="replies">
                    <p>What are your choices when someone puts a gun to your head?</p>
                </li>
                <li class="sent">
                    <p>What are you talking about? You do what they say or they shoot you.</p>
                </li>
                <li class="replies">
                    <p>Wrong. You take the gun, or you pull out a bigger one. Or, you call their bluff. Or, you do any one of a hundred and forty six other things.</p>
                </li>
                <li class="sent">
                    <p>What are you talking about? You do what they say or they shoot you.</p>
                </li>
                <li class="replies">
                    <p>Wrong. You take the gun, or you pull out a bigger one. Or, you call their bluff. Or, you do any one of a hundred and forty six other things.</p>
                </li>
                <li class="sent">
                    <p>What are you talking about? You do what they say or they shoot you.</p>
                </li>
                <li class="replies">
                    <p>Wrong. You take the gun, or you pull out a bigger one. Or, you call their bluff. Or, you do any one of a hundred and forty six other things.</p>
                </li>
            </ul>
        </div>
        <div class="message-input">
            <div class="wrap">
                <input type="text" placeholder="Write your message..." />
            </div>
        </div>
    </div>
</div>

<script src="node_modules/socket.io-client/dist/socket.io.js"></script>
<script src="node_modules/jquery/dist/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
<script>
    let socket = io.connect('http://localhost:4200', {query: 'name=' + });
    // Add a connect listener
    socket.on('connect', function () {
        alert('Client has connected to the server!');
    });
    // Add a connect listener
    socket.on('serverMessage', function (data) {
        alert('Received a message from the server:\n' + data);
    });
    // Add a disconnect listener
    socket.on('disconnect', function () {
        alert('The client has disconnected!');
    });

    // Sends a message to the server via sockets
    function sendMessageToServer(message) {
        socket.emit('clientMessage', message);
    }
</script>

<script>

</script>

<script>
    $(".messages").animate({ scrollTop: $(document).height() }, "fast");

    function newMessage() {
        message = $(".message-input input").val();
        if($.trim(message) == '') {
            return false;
        }
        $('<li class="sent"><p>' + message + '</p></li>').appendTo($('.messages ul'));
        $('.message-input input').val(null);
        $(".messages").animate({ scrollTop: $(document).height() }, "fast");
    };

    $('.submit').click(function() {
        newMessage();
    });

    $(window).on('keydown', function(e) {
        if (e.which == 13) {
            newMessage();
            return false;
        }
    });
</script>

</body>
</html>